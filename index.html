<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Global Urban Nexus: Population, Climate, and Terrain</title>
    <script src="https://cdn.jsdelivr.net/npm/plotly.js@2.12.1/dist/plotly.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- DataTables CSS and JS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css">
    <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
    <!-- PapaParse for CSV parsing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>


    <style>
        #dataTable {
            width: 100%;
            margin: 20px 0;
            font-size: 12px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f4f4f4;
        }
        h1, h2 { 
            color: #1a1a1a;
            border-bottom: 2px solid #1a1a1a;
            padding-bottom: 10px;
        }
        .plot { 
            height: 500px;
            margin-bottom: 30px;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .controls { 
            margin-bottom: 15px;
            padding: 15px;
            background-color: #e0e0e0;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-direction: column;
        } 
        
        .row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .row > * {
            margin-right: 10px;
        }

        select, label { 
            margin: 0 10px;
            padding: 8px;
            font-size: 12px;
        }
        .category-checkbox { 
            margin-right: 20px;
            font-weight: bold;
        }
        p { 
            text-align: justify; 
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <input type="file" id="fileInput" />
    <table id="dataTable" class="display"></table>

    <h1>Global Urban Nexus: Population, Climate, and Terrain</h1>
    
    <p>In our rapidly urbanizing world, cities are more than just population centers; they're complex ecosystems influenced by climate, geography, and socio-economic factors. Today, we'll embark on a data-driven journey through some of the world's most notable cities, examining the intricate dance between population, temperature, elevation, and air pressure.</p>

    <h2>The Climatic Pull of Population</h2>
    <p>First, let's explore whether population gravitates towards certain climatic conditions. Are megacities more likely in temperate zones or tropical heat? Perhaps factors like latitude or proximity to coastlines play a role? Use the dropdown menus to uncover these global patterns.</p>

    <div class="controls">
        <div class="row">
            <label for="x-axis">X-Axis:</label>
            <select id="x-axis">
                <option value="avgTemp">Average Temperature</option>
                <option value="population">Population</option>
                <option value="elevation">Elevation</option>
                <option value="lat">Latitude</option>
                <option value="long">Longitude</option>
            </select>
    
            <label for="y-axis">Y-Axis:</label>
            <select id="y-axis">
                <option value="population">Population</option>
                <option value="avgTemp">Average Temperature</option>
                <option value="elevation">Elevation</option>
                <option value="air_pressure">Air Pressure</option>
            </select>
        </div>
    
        <div class="row">

            <label for="color-attr">Color:</label>
            <select id="color-attr">
                <option value="avgTemp">Average Temperature</option>
                <option value="population">Population</option>
                <option value="elevation">Elevation</option>
                <option value="air_pressure">Air Pressure</option>
            </select>

            <label for="size-attr">Size:</label>
            <select id="size-attr">
                <option value="population">Population</option>
                <option value="avgTemp">Average Temperature</option>
                <option value="elevation">Elevation</option>
                <option value="air_pressure">Air Pressure</option>
            </select>
        </div>
    </div>
    
    <div id="scatter-plot"></div>
    
    <h2>Cities in 3D: Altitude, Climate, and Urban Categories</h2>
    <p>Now, we'll ascend to a 3D perspective. We've classified cities into categories A, B, and C based on factors like infrastructure, economy, and quality of life. Let's plot these cities in 3D space, with their geographic coordinates and a chosen attribute influencing their color. Do Category A cities cluster at certain elevations? Are Category C cities more dispersed in terms of air pressure?</p>

    <div class="controls">
        <div class="row">
            <label for="3d-category">City Category:</label>
            <select id="3d-category">
                <option value="A">Category A</option>
                <option value="B">Category B</option>
                <option value="C">Category C</option>
            </select>

            <label for="3d-color-attr">Color:</label>
            <select id="3d-color-attr">
                <option value="avgTemp">Average Temperature</option>
                <option value="population">Population</option>
                <option value="elevation">Elevation</option>
                <option value="air_pressure">Air Pressure</option>
            </select>

            <label for="3d-size-attr">Size:</label>
            <select id="3d-size-attr">
                <option value="avgTemp">Average Temperature</option>
                <option value="population">Population</option>
                <option value="elevation">Elevation</option>
                <option value="air_pressure">Air Pressure</option>
            </select>
        </div>
    </div>
    
    <div id="3d-plot" class="plot"></div>
    
    <h2>The Global Tapestry of Urban Categories</h2>
    <p>Finally, let's map our cities on a global canvas. The size of each marker represents population, while its color denotes average temperature. Do certain urban categories form contiguous bands across continents, or are they scattered like a global mosaic? Toggle categories to reveal these global patterns.</p>

    <div class="controls">
        <label>Map Categories:</label>
        <div>
            <label class="category-checkbox">
                <input type="checkbox" id="map-cat-a" checked> Category A
            </label>
            <label class="category-checkbox">
                <input type="checkbox" id="map-cat-b" checked> Category B
            </label>
            <label class="category-checkbox">
                <input type="checkbox" id="map-cat-c" checked> Category C
            </label>
        </div>
    </div>
    
    <div id="map" class="plot"></div>

    <h2>Conclusion: The Multifaceted Nature of Urban Growth</h2>
    <p>Our journey through this data reveals that cities are not just dots on a map or bars on a chart. They are living entities, their growth and character shaped by an interplay of climate, geography, and human factors. High populations don't always correlate with balmy temperatures; some of the largest cities brave extreme conditions. Elevation and air pressure add nuances to our understanding, perhaps hinting at historical trade routes or strategic military positions.</p>

    <p>The categorization of cities adds yet another layer. Are Category A cities more resilient to climatic extremes? Do Category B cities prefer certain elevations for agriculture or trade? These questions underscore the complexity of urban development and the importance of tailored, data-driven policies for each unique urban landscape.</p>

    <p>As we face global challenges like climate change and rapid urbanization, understanding these multifaceted relationships becomes crucial. Our explorations today are more than academic; they're a compass for building resilient, sustainable cities that can thrive in the diverse conditions of our planet.</p>

    <script src="app.js"></script>
</body>
</html>